import{r as d,j as e,A as N,m as l}from"./vendor-animation-DXGFpM2b.js";import{c as S}from"./index-ey2jIjUC.js";import{E as C,C as E,j as R,k as _,R as k}from"./vendor-icons-BaZEede0.js";import"./vendor-react-CeqUUJ1W.js";const m="nail_course_price_timer",o=120,$=({initialAnchorPrice:f="R$ 997,00",promoPrice:g="R$ 49,90",checkoutUrl:u="#",className:h,onAnalytics:i=(a,r)=>console.log(`[Analytics] ${a}`,r)})=>{const[a,r]=d.useState("spoiler"),[x,c]=d.useState(o),n=d.useRef(null);d.useEffect(()=>{const t=sessionStorage.getItem(m);if(t)try{const{status:s,endTime:p}=JSON.parse(t);if(s==="expired")r("expired"),c(0);else if(s==="revealed"){const j=Date.now();Math.max(0,Math.ceil((p-j)/1e3))<=0?(r("expired"),c(0),i("timer_expired",{auto:!0})):r("spoiler")}}catch(s){console.error("Failed to parse saved timer state",s)}},[]),d.useEffect(()=>(a==="revealed"&&x>0?n.current=setInterval(()=>{c(t=>{const s=t-1;return s<=0?(clearInterval(n.current),r("expired"),sessionStorage.setItem(m,JSON.stringify({status:"expired",endTime:0})),i("timer_expired"),0):s})},1e3):n.current&&clearInterval(n.current),()=>{n.current&&clearInterval(n.current)}),[a,x]);const v=()=>{const t=Date.now()+o*1e3;r("revealed"),c(o),sessionStorage.setItem(m,JSON.stringify({status:"revealed",endTime:t})),i("price_reveal_clicked"),i("timer_started",{duration:o})},y=()=>{r("revealed");const t=Date.now()+o*1e3;c(o),sessionStorage.setItem(m,JSON.stringify({status:"revealed",endTime:t})),i("timer_restarted")},b=()=>{i("cta_clicked",{url:u}),window.location.href=u},w=t=>{const s=Math.floor(t/60).toString().padStart(2,"0"),p=(t%60).toString().padStart(2,"0");return`${s}:${p}`};return e.jsx("div",{className:S("relative w-full max-w-md mx-auto overflow-hidden transition-all duration-500","bg-white rounded-2xl shadow-xl border border-rose-100",a==="spoiler"?"p-6":"p-8 ring-4 ring-rose-50",h),children:e.jsxs(N,{mode:"wait",children:[a==="spoiler"&&e.jsxs(l.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0,scale:1.05,filter:"blur(8px)"},transition:{duration:.3},className:"flex flex-col items-center text-center space-y-6",children:[e.jsxs("button",{onClick:v,className:"relative w-full overflow-hidden rounded-xl group cursor-pointer","aria-label":"Revelar pre√ßo",children:[e.jsxs("div",{className:"absolute inset-0 z-0 opacity-100 transition-opacity duration-500 bg-[#333]",children:[e.jsx("div",{className:"absolute inset-0 opacity-30",style:{backgroundImage:`url("data:image/svg+xml,%3Csvg viewBox='0 0 200 200' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='noiseFilter'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.8' numOctaves='3' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23noiseFilter)'/%3E%3C/svg%3E")`,filter:"contrast(150%) brightness(100%)"}}),e.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-transparent via-white/10 to-transparent skew-x-12 translate-x-[-100%] animate-[shimmer_2s_infinite]"})]}),e.jsxs("div",{className:"relative z-10 py-10 px-4 select-none flex flex-col items-center justify-center gap-2",children:[e.jsx("div",{className:"h-4 w-3/4 bg-white/20 rounded-md animate-pulse mb-2 blur-[2px]"}),e.jsx("div",{className:"h-10 w-1/2 bg-white/20 rounded-md animate-pulse blur-[2px]"}),e.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:e.jsxs("span",{className:"bg-black/50 backdrop-blur-sm text-white px-4 py-2 rounded-full text-sm font-medium border border-white/10 shadow-lg flex items-center gap-2 transform group-hover:scale-105 transition-transform",children:[e.jsx(C,{className:"w-4 h-4"}),"Toque para revelar"]})})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("p",{className:"font-medium text-gray-700",children:["O pre√ßo t√° aqui‚Ä¶ mas t√° de spoiler ",e.jsx("span",{role:"img","aria-label":"smile",children:"üòÑ"})]}),e.jsx("p",{className:"text-sm text-gray-500",children:"Uma condi√ß√£o √∫nica que preparei pra voc√™."})]})]},"spoiler"),a==="revealed"&&e.jsxs(l.div,{id:"price-reveal-content",initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,scale:.95},transition:{type:"spring",stiffness:300,damping:25},className:"flex flex-col items-center text-center space-y-6",children:[e.jsxs("div",{className:"space-y-1",children:[e.jsxs(l.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:.2},className:"text-lg text-gray-400 line-through font-medium",children:["De: ",f]}),e.jsx(l.div,{initial:{scale:.8,opacity:0},animate:{scale:1,opacity:1},transition:{type:"spring",stiffness:400,delay:.3},className:"text-5xl font-black text-rose-500 tracking-tight",style:{textShadow:"0 4px 12px rgba(225, 29, 72, 0.15)"},children:g}),e.jsxs(l.div,{initial:{opacity:0},animate:{opacity:1},transition:{delay:.5},className:"inline-flex items-center gap-2 px-3 py-1 rounded-full bg-green-50 text-green-700 text-sm font-medium border border-green-100",children:[e.jsx(E,{className:"w-3.5 h-3.5"}),"Oferta por tempo limitado"]})]}),e.jsxs("div",{className:"w-full p-4 bg-orange-50 rounded-xl border border-orange-100 flex items-center justify-between",role:"timer","aria-live":"polite",children:[e.jsxs("div",{className:"flex items-center gap-2 text-orange-800",children:[e.jsx(R,{className:"w-5 h-5 animate-pulse"}),e.jsx("span",{className:"font-semibold text-sm",children:"Pre√ßo reservado por:"})]}),e.jsx("span",{className:"font-mono text-xl font-bold text-orange-600 w-[60px] text-right",children:w(x)})]}),e.jsx("button",{onClick:b,className:"w-full bg-rose-600 hover:bg-rose-700 text-white font-bold rounded-xl transition-all text-lg py-4 shadow-lg shadow-rose-200/50 hover:shadow-rose-300/60 animate-in fade-in zoom-in duration-300",children:"Garantir minha vaga agora"}),e.jsx("p",{className:"text-xs text-gray-400",children:"Pagamento seguro e acesso imediato."})]},"revealed"),a==="expired"&&e.jsxs(l.div,{initial:{opacity:0},animate:{opacity:1},className:"flex flex-col items-center text-center space-y-6 py-4",children:[e.jsx("div",{className:"w-16 h-16 rounded-full bg-gray-100 flex items-center justify-center mb-2",children:e.jsx(_,{className:"w-8 h-8 text-gray-400"})}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("h3",{className:"text-xl font-bold text-gray-800",children:"Reserva expirada"}),e.jsx("p",{className:"text-gray-500 max-w-[200px] mx-auto",children:"O tempo para garantir essa condi√ß√£o especial acabou."})]}),e.jsxs("button",{onClick:y,className:"w-full bg-zinc-800 hover:bg-zinc-900 text-white font-medium rounded-lg py-3 px-4 transition-colors flex items-center justify-center gap-2",children:[e.jsx(k,{className:"w-4 h-4"}),"Reservar novamente"]})]},"expired")]})})};export{$ as PriceSpoiler};
